
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ø®Ù…Ù† ØµÙˆØª Ø§Ù„Ø­ÙŠÙˆØ§Ù† - Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„ØµØºØ§Ø±</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&family=Fredoka:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #f0f9ff;
            --primary-color: #4cc9f0;
        }
        body { 
            font-family: 'Cairo', 'Fredoka', sans-serif; 
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            height: 100vh;
            height: -webkit-fill-available;
            overflow: hidden;
            touch-action: manipulation;
        }
        .font-kids { font-family: 'Fredoka', 'Cairo', sans-serif; }
        
        /* Animated Background Elements */
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            z-index: -1;
            animation: float 20s infinite linear;
        }
        @keyframes float {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }

        .game-container {
            height: 100%;
            max-height: 900px;
            display: flex;
            flex-direction: column;
        }

        .animal-card {
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
        }
        .animal-card:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        .wave-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            height: 40px;
        }
        .wave-bar {
            width: 6px;
            background: white;
            border-radius: 10px;
            animation: wave 1s infinite ease-in-out;
        }
        @keyframes wave {
            0%, 100% { height: 10px; }
            50% { height: 40px; }
        }

        .animate-pop { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Safe area for iPhones */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .pt-safe { padding-top: env(safe-area-inset-top); }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body class="flex items-center justify-center">
    <!-- Background Decorations -->
    <div class="bubble w-20 h-20" style="left: 10%; animation-delay: 0s;"></div>
    <div class="bubble w-32 h-32" style="left: 60%; animation-delay: 5s;"></div>
    <div class="bubble w-16 h-16" style="left: 80%; animation-delay: 2s;"></div>

    <div id="root" class="w-full h-full max-w-lg flex justify-center items-center"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useCallback, useRef, useEffect } from 'https://esm.sh/react@19.0.0';
        import ReactDOM from 'https://esm.sh/react-dom@19.0.0/client';

        const ANIMALS = [
          { id: 'lion', name: 'Ø£Ø³Ø¯', emoji: 'ğŸ¦', color: 'bg-orange-400', border: 'border-orange-600', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Lion+Roar&filename=24/243633-89914073-6789-497d-9481-b5f79549303a.mp3' },
          { id: 'elephant', name: 'ÙÙŠÙ„', emoji: 'ğŸ˜', color: 'bg-sky-400', border: 'border-sky-600', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Elephant+Trumpet&filename=mt/MTI5MzE5NzgxMjkzMjk0_vL8_2bc9mF0yY.mp3' },
          { id: 'cow', name: 'Ø¨Ù‚Ø±Ø©', emoji: 'ğŸ®', color: 'bg-yellow-200', border: 'border-yellow-400', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Cow+Moo&filename=24/243633-56834924-1188-4f80-873b-586718d74868.mp3' },
          { id: 'duck', name: 'Ø¨Ø·Ø©', emoji: 'ğŸ¦†', color: 'bg-yellow-400', border: 'border-yellow-600', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Duck+Quack&filename=24/243633-8742845c-2045-4b07-8822-25e1976077a2.mp3' },
          { id: 'monkey', name: 'Ù‚Ø±Ø¯', emoji: 'ğŸ’', color: 'bg-amber-600', border: 'border-amber-800', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Monkey+Screech&filename=24/243633-72861962-430c-403d-8255-70335805470d.mp3' },
          { id: 'cat', name: 'Ù‚Ø·Ø©', emoji: 'ğŸ±', color: 'bg-rose-300', border: 'border-rose-500', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Cat+Meow&filename=24/243633-91823774-8898-4226-9430-819232323838.mp3' },
          { id: 'dog', name: 'ÙƒÙ„Ø¨', emoji: 'ğŸ¶', color: 'bg-stone-300', border: 'border-stone-500', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Dog+Bark&filename=24/243633-41824748-8182-4118-8418-418418418418.mp3' },
          { id: 'rooster', name: 'Ø¯ÙŠÙƒ', emoji: 'ğŸ“', color: 'bg-red-400', border: 'border-red-600', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Rooster+Crow&filename=24/243633-31189405-1815-4638-9943-85764724773c.mp3' }
        ];

        const App = () => {
          const [status, setStatus] = useState('START');
          const [score, setScore] = useState(0);
          const [round, setRound] = useState(1);
          const [currentAnimal, setCurrentAnimal] = useState(null);
          const [options, setOptions] = useState([]);
          const [isPlaying, setIsPlaying] = useState(false);
          const [feedback, setFeedback] = useState(null);
          const audioRef = useRef(new Audio());

          const playSound = (url) => {
            audioRef.current.src = url;
            setIsPlaying(true);
            audioRef.current.play().catch(e => {
                console.log("Audio failed", e);
                setIsPlaying(false);
            });
            audioRef.current.onended = () => setIsPlaying(false);
          };

          const startRound = useCallback(() => {
            const shuffled = [...ANIMALS].sort(() => 0.5 - Math.random());
            const correct = shuffled[0];
            const choices = shuffled.slice(0, 4).sort(() => 0.5 - Math.random());
            setCurrentAnimal(correct);
            setOptions(choices);
            setFeedback(null);
            setStatus('PLAYING');
            setTimeout(() => playSound(correct.sound), 800);
          }, []);

          const handleChoice = (animal) => {
            if (feedback || isPlaying) return;
            if (animal.id === currentAnimal.id) {
              setScore(s => s + 1);
              setFeedback({ isCorrect: true, msg: "Ø£Ù†Øª Ø¨Ø·Ù„! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ğŸŒŸ" });
              setTimeout(() => {
                if (round < 5) { 
                  setRound(r => r + 1); 
                  startRound(); 
                } else { 
                  setStatus('GAME_OVER'); 
                }
              }, 1800);
            } else {
              setFeedback({ isCorrect: false, msg: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙŠØ§ Ø°ÙƒÙŠ ğŸ’¡" });
              setTimeout(() => setFeedback(null), 1200);
            }
          };

          return (
            <div className="game-container w-full max-w-md bg-white/80 backdrop-blur-md rounded-[3rem] shadow-[0_20px_50px_rgba(0,0,0,0.1)] border-[12px] border-white overflow-hidden relative">
              
              {/* Header */}
              <div className="bg-gradient-to-b from-yellow-300 to-yellow-400 p-6 pt-10 text-center relative shadow-lg">
                <div className="absolute top-2 left-0 right-0 flex justify-center">
                    <div className="w-16 h-1.5 bg-white/50 rounded-full"></div>
                </div>
                <h1 className="text-3xl font-black text-white drop-shadow-[0_2px_2px_rgba(0,0,0,0.2)]">Ø¹Ø§Ù„Ù… Ø§Ù„Ø£ØµÙˆØ§Øª ğŸ¾</h1>
                <div className="flex justify-between mt-4 px-2">
                  <div className="bg-orange-500/90 backdrop-blur-sm text-white px-4 py-1.5 rounded-2xl shadow-md border-b-4 border-orange-700 font-bold text-sm">
                    Ø§Ù„Ø¬ÙˆÙ„Ø© {round}/5
                  </div>
                  <div className="bg-green-500/90 backdrop-blur-sm text-white px-4 py-1.5 rounded-2xl shadow-md border-b-4 border-green-700 font-bold text-sm">
                    â­ {score}
                  </div>
                </div>
              </div>

              {/* Main Content Area */}
              <div className="flex-1 p-6 flex flex-col items-center justify-between pb-10">
                
                {status === 'START' && (
                  <div className="flex-1 flex flex-col items-center justify-center animate-pop">
                    <div className="text-[10rem] mb-10 drop-shadow-xl select-none">ğŸ¦</div>
                    <button 
                      onClick={() => { setScore(0); setRound(1); startRound(); }} 
                      className="bg-green-500 hover:bg-green-400 text-white px-14 py-6 rounded-[2.5rem] text-3xl font-black shadow-[0_12px_0_#15803d] active:shadow-none active:translate-y-2 transition-all border-4 border-white"
                    >
                      Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©!
                    </button>
                  </div>
                )}

                {status === 'PLAYING' && (
                  <>
                    <div className="flex-1 flex flex-col items-center justify-center w-full">
                      <button 
                        onClick={() => playSound(currentAnimal.sound)} 
                        disabled={isPlaying}
                        className={`w-44 h-44 rounded-full mb-10 flex flex-col items-center justify-center transition-all relative ${isPlaying ? 'bg-orange-400 scale-105' : 'bg-indigo-500 shadow-[0_15px_0_#4338ca] active:shadow-none active:translate-y-2'}`}
                      >
                        {isPlaying ? (
                          <div className="wave-container">
                            <div className="wave-bar" style={{animationDelay: '0s'}}></div>
                            <div className="wave-bar" style={{animationDelay: '0.2s'}}></div>
                            <div className="wave-bar" style={{animationDelay: '0.4s'}}></div>
                            <div className="wave-bar" style={{animationDelay: '0.1s'}}></div>
                          </div>
                        ) : (
                          <>
                            <i className="fas fa-volume-up text-7xl text-white mb-2"></i>
                            <span className="text-white font-bold text-xs opacity-80">Ø§Ø¶ØºØ· Ù„Ù„Ø§Ø³ØªÙ…Ø§Ø¹</span>
                          </>
                        )}
                      </button>

                      <div className="grid grid-cols-2 gap-5 w-full">
                        {options.map(a => (
                          <button 
                            key={a.id} 
                            onClick={() => handleChoice(a)} 
                            className={`animal-card ${a.color} ${a.border} p-6 rounded-[2.5rem] border-4 flex flex-col items-center justify-center aspect-square`}
                          >
                            <span className="text-6xl mb-3">{a.emoji}</span>
                            <span className="font-black text-gray-800 text-xl">{a.name}</span>
                          </button>
                        ))}
                      </div>
                    </div>
                  </>
                )}

                {status === 'GAME_OVER' && (
                  <div className="flex-1 flex flex-col items-center justify-center animate-pop text-center">
                    <div className="relative mb-8">
                        <span className="text-[12rem]">ğŸ†</span>
                        <div className="absolute top-0 left-0 right-0 text-5xl animate-bounce">âœ¨</div>
                    </div>
                    <h2 className="text-4xl font-black text-gray-800 mb-2">Ù…Ø°Ù‡Ù„ ÙŠØ§ Ø¨Ø·Ù„!</h2>
                    <p className="text-2xl text-indigo-600 font-bold mb-10">Ø­Ù‚Ù‚Øª {score} Ù…Ù† Ø£ØµÙ„ 5</p>
                    <button 
                      onClick={() => setStatus('START')} 
                      className="bg-orange-500 hover:bg-orange-400 text-white px-12 py-5 rounded-[2rem] text-2xl font-black shadow-[0_10px_0_#c2410c] active:shadow-none active:translate-y-2 transition-all border-4 border-white"
                    >
                      Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ”„
                    </button>
                  </div>
                )}
              </div>

              {/* Feedback Overlay */}
              {feedback && (
                <div className="absolute inset-0 bg-white/90 backdrop-blur-md flex items-center justify-center z-50 animate-pop">
                  <div className="text-center p-8">
                    <div className="text-[12rem] mb-6 animate-bounce">
                        {feedback.isCorrect ? 'ğŸ’' : 'ğŸ’«'}
                    </div>
                    <h2 className={`text-4xl font-black leading-tight ${feedback.isCorrect ? 'text-green-500' : 'text-orange-500'}`}>
                      {feedback.msg}
                    </h2>
                  </div>
                </div>
              )}
              
              <div className="bg-gray-100/50 py-3 text-center text-gray-400 text-xs font-bold uppercase tracking-widest pb-safe">
                ØµÙ†Ø¹ Ø¨ÙƒÙ„ â¤ï¸ Ù„Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
