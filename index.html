 
<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø®Ù…Ù† ØµÙˆØª Ø§Ù„Ø­ÙŠÙˆØ§Ù† - Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„ØµØºØ§Ø±</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Quicksand', sans-serif; background: #eef2ff; overflow: hidden; touch-action: manipulation; }
        .font-kids { font-family: 'Fredoka One', cursive; }
        .bounce { animation: bounce 0.8s infinite alternate; }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-15px); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        * { user-select: none; -webkit-tap-highlight-color: transparent; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body class="min-h-screen flex items-center justify-center p-2">
    <div id="root" class="w-full flex justify-center"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useCallback, useRef } from 'https://esm.sh/react@19.0.0';
        import ReactDOM from 'https://esm.sh/react-dom@19.0.0/client';

        const ANIMALS = [
          { id: 'lion', name: 'Ø£Ø³Ø¯', emoji: 'ğŸ¦', color: 'bg-orange-400', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Lion+Roar&filename=24/243633-89914073-6789-497d-9481-b5f79549303a.mp3' },
          { id: 'elephant', name: 'ÙÙŠÙ„', emoji: 'ğŸ˜', color: 'bg-gray-400', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Elephant+Trumpet&filename=mt/MTI5MzE5NzgxMjkzMjk0_vL8_2bc9mF0yY.mp3' },
          { id: 'cow', name: 'Ø¨Ù‚Ø±Ø©', emoji: 'ğŸ®', color: 'bg-yellow-100', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Cow+Moo&filename=24/243633-56834924-1188-4f80-873b-586718d74868.mp3' },
          { id: 'duck', name: 'Ø¨Ø·Ø©', emoji: 'ğŸ¦†', color: 'bg-yellow-400', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Duck+Quack&filename=24/243633-8742845c-2045-4b07-8822-25e1976077a2.mp3' },
          { id: 'monkey', name: 'Ù‚Ø±Ø¯', emoji: 'ğŸ’', color: 'bg-amber-700', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Monkey+Screech&filename=24/243633-72861962-430c-403d-8255-70335805470d.mp3' },
          { id: 'cat', name: 'Ù‚Ø·Ø©', emoji: 'ğŸ±', color: 'bg-orange-200', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Cat+Meow&filename=24/243633-91823774-8898-4226-9430-819232323838.mp3' },
          { id: 'dog', name: 'ÙƒÙ„Ø¨', emoji: 'ğŸ¶', color: 'bg-orange-100', sound: 'https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Dog+Bark&filename=24/243633-41824748-8182-4118-8418-418418418418.mp3' }
        ];

        const App = () => {
          const [status, setStatus] = useState('START');
          const [score, setScore] = useState(0);
          const [round, setRound] = useState(1);
          const [currentAnimal, setCurrentAnimal] = useState(null);
          const [options, setOptions] = useState([]);
          const [isPlaying, setIsPlaying] = useState(false);
          const [feedback, setFeedback] = useState(null);
          const audioRef = useRef(new Audio());

          const playSound = (url) => {
            audioRef.current.src = url;
            setIsPlaying(true);
            audioRef.current.play().catch(() => setIsPlaying(false));
            audioRef.current.onended = () => setIsPlaying(false);
          };

          const startRound = useCallback(() => {
            const shuffled = [...ANIMALS].sort(() => 0.5 - Math.random());
            const correct = shuffled[0];
            const choices = shuffled.slice(0, 4).sort(() => 0.5 - Math.random());
            setCurrentAnimal(correct);
            setOptions(choices);
            setFeedback(null);
            setStatus('PLAYING');
            setTimeout(() => playSound(correct.sound), 600);
          }, []);

          const handleChoice = (animal) => {
            if (feedback || isPlaying) return;
            if (animal.id === currentAnimal.id) {
              setScore(s => s + 1);
              setFeedback({ isCorrect: true, msg: "Ø£Ø­Ø³Ù†Øª! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ğŸŒŸ" });
              setTimeout(() => {
                if (round < 5) { 
                  setRound(r => r + 1); 
                  startRound(); 
                } else { 
                  setStatus('GAME_OVER'); 
                }
              }, 1600);
            } else {
              setFeedback({ isCorrect: false, msg: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙŠØ§ Ø¨Ø·Ù„ ğŸ" });
              setTimeout(() => setFeedback(null), 1200);
            }
          };

          return (
            <div className="max-w-md w-full min-h-[90vh] bg-white rounded-3xl shadow-2xl border-8 border-yellow-300 flex flex-col overflow-hidden relative">
              <div className="bg-yellow-400 p-5 text-center shadow-md z-10">
                <h1 className="text-2xl font-kids text-white drop-shadow-sm">Ø®Ù…Ù† ØµÙˆØª Ø§Ù„Ø­ÙŠÙˆØ§Ù†</h1>
                <div className="flex justify-between mt-3 text-white font-bold text-sm" dir="rtl">
                  <span className="bg-orange-500 px-4 py-1 rounded-full">Ø¬ÙˆÙ„Ø© {round}/5</span>
                  <span className="bg-green-500 px-4 py-1 rounded-full">Ø§Ù„Ù†Ø¬ÙˆÙ…: {score}</span>
                </div>
              </div>

              <div className="flex-1 p-6 flex flex-col items-center justify-center">
                {status === 'START' && (
                  <div className="text-center animate-fade-in">
                    <div className="text-8xl mb-6 bounce">ğŸ¦ğŸ¶ğŸ˜</div>
                    <button 
                      onClick={() => { setScore(0); setRound(1); startRound(); }} 
                      className="bg-green-500 text-white p-8 rounded-full text-2xl font-kids shadow-xl border-b-8 border-green-700 active:scale-95 transition-transform"
                    >
                      Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨!
                    </button>
                  </div>
                )}

                {status === 'PLAYING' && (
                  <div className="w-full flex flex-col items-center animate-fade-in">
                    <button 
                      onClick={() => playSound(currentAnimal.sound)} 
                      disabled={isPlaying}
                      className={`w-36 h-36 rounded-full mb-10 flex items-center justify-center transition-all ${isPlaying ? 'bg-orange-300 scale-110' : 'bg-blue-500 shadow-xl border-b-8 border-blue-700'}`}
                    >
                      <i className={`fas ${isPlaying ? 'fa-spinner fa-spin' : 'fa-volume-up'} text-6xl text-white`}></i>
                    </button>
                    <div className="grid grid-cols-2 gap-4 w-full">
                      {options.map(a => (
                        <button 
                          key={a.id} 
                          onClick={() => handleChoice(a)} 
                          className={`${a.color} p-6 rounded-3xl border-4 border-white shadow-lg active:scale-90 transition-transform flex flex-col items-center`}
                        >
                          <span className="text-6xl mb-2">{a.emoji}</span>
                          <span className="font-bold text-gray-800 text-xl">{a.name}</span>
                        </button>
                      ))}
                    </div>
                  </div>
                )}

                {status === 'GAME_OVER' && (
                  <div className="text-center animate-fade-in">
                    <div className="text-9xl mb-6">ğŸˆ</div>
                    <h2 className="text-3xl font-kids text-gray-800">Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹!</h2>
                    <p className="text-xl text-gray-600 mb-8 mt-2">Ù„Ù‚Ø¯ Ø¬Ù…Ø¹Øª {score} Ù†Ø¬ÙˆÙ…!</p>
                    <button 
                      onClick={() => setStatus('START')} 
                      className="bg-orange-500 text-white px-10 py-4 rounded-full font-kids text-xl shadow-lg border-b-8 border-orange-700 active:scale-95"
                    >
                      Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                    </button>
                  </div>
                )}

                {feedback && (
                  <div className="absolute inset-0 bg-white/95 flex items-center justify-center z-20 animate-fade-in">
                    <div className="text-center">
                      <div className="text-9xl mb-4">{feedback.isCorrect ? 'âœ¨' : 'ğŸ'}</div>
                      <h2 className={`text-4xl font-kids px-10 ${feedback.isCorrect ? 'text-green-500' : 'text-orange-500'}`}>{feedback.msg}</h2>
                    </div>
                  </div>
                )}
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
